/*Author : AL EMRAN
email:emrancu1@gmail.com
website:http://alemran.me
*/

export const SSLPayment=function(){let n=!1;const t=function(){document.querySelector("#ssl-payment-modal .payment-modal-container").classList.add("payment-active"),document.querySelector("body").classList.add("payment-modal-active")},e=function(n,t){return`\n\t <div class="payment-modal-container">\n     <div class="payment-modal-content">\n        <div class="payment-modal-header">\n            <div class="payment-logo">\n                <img src="${t}" class="payment-logo-img" alt="">\n            </div>\n            <div class="payment-close-button"  >x</div>\n        </div>\n        <div class="payment-modal-body">\n            <iframe src="${n}"  >\n            </iframe>\n        </div>\n     </div>\n     <div class="payment-modal-bg"></div>\n     </div>`},o=function(){document.querySelector("#ssl-payment-modal").addEventListener("click",function(n){n.stopPropagation(),n.target.classList.contains("payment-close-button")&&(document.querySelector("#ssl-payment-modal .payment-modal-container").classList.remove("payment-active"),document.querySelector("body").classList.remove("payment-modal-active"),setTimeout(()=>{document.querySelector("#ssl-payment-modal").innerHTML=""},300))},!1),window.addEventListener("message",function(n){if("https://sandbox.sslcommerz.com"===n.origin||"https://epay.sslcommerz.com"===n.origin){let t=JSON.parse(n.data);"otp"!=t.type&&"gw_redirect"!=t.type||window.location.replace(t.url),"resize"==t.type&&(document.querySelector("#ssl-payment-modal .payment-modal-body iframe").style.height=parseFloat(t.height)+5+"px")}})};let a=function(){let t=document.querySelector("body"),e=document.createElement("style");e.innerHTML="\n    .payment-close-button{\n            font-size: 18px;\n            line-height: 20px;\n            color: #000;\n            text-shadow: 0 1px 0 #fff;\n            filter: alpha(opacity=20);\n            opacity: .8;\n            position: absolute;\n            right: 10px;\n            z-index: 999999;\n            top: 9px;\n            font-weight: 600;\n            border-radius: 50%;\n            border: 1px solid red;\n            height: 25px;\n            width: 25px;\n            text-align: center;\n            cursor: pointer;\n        }\n    \n        .payment-modal-header{\n          position: relative;\n          padding-bottom: 35px;\n          background: white;\n          margin-bottom: -10px;\n        }\n        .payment-modal-header > .payment-logo > .payment-logo-img{\n            max-height: 60px !important;\n        }\n        .payment-modal-header > .payment-logo{\n            position: absolute;\n            top: 10px; \n            z-index: 999;\n            text-align: center; \n            border-top-right-radius: 5px;\n            border-top-left-radius: 5px;\n            left: 100px;\n            right: 100px;\n        }\n        .payment-modal-container.payment-active {\n            opacity: 1;\n            visibility: visible;\n            z-index: 999;\n            transition: all .6s;\n        }\n        .payment-modal-container {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            overflow: auto;\n            display: flex;\n            background: rgba(0,0,0,.5);\n            justify-content: center; \n            padding-top: 100px;\n            opacity: 0;\n            visibility: hidden;\n            z-index: -1;\n            transition: all .6s;\n        }\n        .payment-modal-content{\n            background-color: transparent;\n        }\n        .payment-modal-body{\n            position: relative;\n            flex-shrink: 0;\n            margin-top: auto;\n            margin-bottom: auto;\n            width: 340px;\n            border-radius: 6px; \n            opacity: 1;\n            cursor: auto;\n            transition: transform .3s cubic-bezier(.175, .885, .32, 1.275);\n            padding-bottom: 100px;\n            background-color: transparent;\n        }\n        .payment-modal-body > iframe{\n            border: none;\n            margin: 0;\n            padding: 0;\n            display: block;\n            height: 570px;\n            width: 340px;\n            border-radius: 5px;\n        }\n    \n        body.payment-modal-active{\n            overflow-y: hidden !important;\n        }\n     ",t.parentNode.insertBefore(e,t);let a=document.createElement("div");a.id="ssl-payment-modal",t.append(a),n=!0,setTimeout(()=>{o()},200)};return{OpenModalWithRequest:function(o,i){!function(o,i){n||a(),fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(n=>n.json()).then(n=>{if("success"===n.status&&n.data){let o=n.data+"?full=1",a=n.logo,i=e(o,a);document.querySelector("#ssl-payment-modal").innerHTML=i,setTimeout(()=>{t()},100)}else alert("Something went wrong")}).catch(n=>{alert("Something went wrong")})}(o,i)},OpenModal:function(o,i){!function(o,i){n||a();let r=e(o+"?full=1",i);document.querySelector("#ssl-payment-modal").innerHTML=r,setTimeout(()=>{t()},100)}(o,i)}}}();